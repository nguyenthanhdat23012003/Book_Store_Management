import{j as e,W as h,r as m,Y as o,a as r}from"./app-DlTfACp8.js";import{A as u}from"./AuthenticatedLayout-R8S8T6Np.js";import"./ApplicationLogo-CuGNAzZ7.js";import"./transition-C164aHv8.js";function p({item:s}){return e.jsxs("div",{className:"flex flex-wrap sm:items-center px-4 py-2 rounded bg-fuchsia-100 shadow-lg border border-gray",children:[e.jsxs("div",{className:"flex grow lg:w-1/2 w-full justify-center sm:px-4",children:[e.jsx("div",{className:"w-1/4 m-1",children:e.jsx("img",{src:s.product.image_path,className:"rounded-lg shadow-2xl w-"})}),e.jsx("div",{className:"w-3/4 overflow-hidden px-4",children:e.jsx("p",{className:"sm:py-3 py-1 text-sm text-ellipsis",children:s.product.name})})]}),e.jsxs("div",{className:"flex flex-wrap lg:w-1/2 w-full justify-center items-center",children:[e.jsxs("div",{className:"sm:w-1/3 w-full flex justify-between items-center text-orange-400",children:[e.jsx("h3",{className:"block sm:hidden",children:"Unit price:"}),e.jsxs("p",{className:"sm:py-3 py-1 sm:w-full w-auto text-center",children:[e.jsx("span",{className:"text-xs",children:"đ"}),Intl.NumberFormat().format(s.product.price)]})]}),e.jsxs("div",{className:"sm:w-1/3 w-full flex justify-between items-center text-orange-400",children:[e.jsx("h3",{className:"block sm:hidden",children:"Quantity:"}),e.jsx("p",{className:"sm:py-3 py-1 sm:w-full w-auto text-center",children:s.quantity})]}),e.jsxs("div",{className:"sm:w-1/3 w-full flex justify-between items-center text-red-600 font-bold text-xl",children:[e.jsx("h3",{className:"block sm:hidden",children:"Total:"}),e.jsxs("p",{className:"sm:py-3 py-1 sm:w-full w-auto text-center",children:[e.jsx("span",{className:"text-xs",children:"đ"}),Intl.NumberFormat().format(s.quantity*s.product.price)]})]})]})]})}function j({completeSteps:s}){return e.jsxs("ul",{className:"timeline timeline-vertical sm:timeline-horizontal",children:[e.jsxs("li",{children:[e.jsx("div",{className:`timeline-start timeline-box ${s>=1&&"bg-primary text-white"}`,children:"Choose a product"}),e.jsx("div",{className:"timeline-middle",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:`w-5 h-5 ${s>=1&&"text-primary"}`,children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})})}),e.jsx("hr",{})]}),e.jsxs("li",{children:[e.jsx("hr",{}),e.jsx("div",{className:`timeline-start timeline-box ${s>=2&&"bg-primary text-white"}`,children:"Add to cart"}),e.jsx("div",{className:"timeline-middle",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:`w-5 h-5 ${s>=2&&"text-primary"}`,children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})})}),e.jsx("hr",{})]}),e.jsxs("li",{children:[e.jsx("hr",{}),e.jsx("div",{className:`timeline-start timeline-box ${s>=3&&"bg-primary text-white"}`,children:"View cart"}),e.jsx("div",{className:"timeline-middle",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:`w-5 h-5 ${s>=4&&"text-primary"}`,children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})})}),e.jsx("hr",{})]}),e.jsxs("li",{children:[e.jsx("hr",{}),e.jsx("div",{className:`timeline-start timeline-box ${s>=4&&"bg-primary text-white"}`,children:"Checkout"}),e.jsx("div",{className:"timeline-middle",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:`w-5 h-5 ${s>=4&&"text-primary"}`,children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})})}),e.jsx("hr",{})]}),e.jsxs("li",{children:[e.jsx("hr",{}),e.jsx("div",{className:`timeline-start timeline-box ${s>=5&&"bg-primary text-white"}`,children:"Pay"}),e.jsx("div",{className:"timeline-middle",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:`w-5 h-5 ${s>=5&&"text-primary"}`,children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})})})]})]})}const g=({order:s})=>{const{data:t,setData:l,put:d}=h({order_id:s.id,phone:"1234567890",province:"Ha Noi",address:"Hai Ba Trung",delivery_type:"normal",shipping_fee:s.shipping_fee||0,free_ship_discount:s.free_ship_discount||0,total_price:s.total_price||0,payment_method:"vn pay"});let n=0;s.order_items.forEach(a=>{n+=a.product.weight*a.quantity}),m.useEffect(()=>{let a=Math.max(0,n+250-3e3)*5;a+=t.province==="Ha Noi"||t.province==="Ho Chi Minh City"?22e3:3e4,a+=t.delivery_type==="normal"?0:s.order_items.length*1e4;let i=t.delivery_type==="normal"?a<=25e3?a:25e3:0;return l({...t,shipping_fee:a,free_ship_discount:i,total_price:s.total_price+a-i}),()=>{}},[t.province,t.delivery_type,t.payment_method]);const c=a=>{a.preventDefault(),d(route("order.update",s.id),t)},x=["An Giang","Ba Ria-Vung Tau","Bac Giang","Bac Kan","Bac Lieu","Bac Ninh","Ben Tre","Binh Dinh","Binh Duong","Binh Phuoc","Binh Thuan","Ca Mau","Can Tho","Cao Bang","Da Nang","Dak Lak","Dak Nong","Dien Bien","Dong Nai","Dong Thap","Gia Lai","Ha Giang","Ha Nam","Ha Noi","Ha Tinh","Hai Duong","Hai Phong","Hau Giang","Hoa Binh","Hung Yen","Khanh Hoa","Kien Giang","Kon Tum","Lai Chau","Lam Dong","Lang Son","Lao Cai","Long An","Nam Dinh","Nghe An","Ninh Binh","Ninh Thuan","Phu Tho","Phu Yen","Quang Binh","Quang Nam","Quang Ngai","Quang Ninh","Quang Tri","Soc Trang","Son La","Tay Ninh","Thai Binh","Thai Nguyen","Thanh Hoa","Thua Thien-Hue","Tien Giang","Tra Vinh","Tuyen Quang","Vinh Long","Vinh Phuc","Yen Bai","Ho Chi Minh City"];return e.jsxs(e.Fragment,{children:[e.jsx(o,{title:"Place order"}),e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(r,{href:route("dashboard"),className:"font-semibold hover:text-amber-700 text-lg text-slate-800 dark:text-gray-200 leading-tight",children:"Media store"})}),e.jsx("li",{children:e.jsx(r,{href:route("cart.index"),className:"font-semibold hover:text-amber-700 text-lg text-slate-800 dark:text-gray-200 leading-tight",children:"Your cart"})}),e.jsx("li",{children:e.jsx("span",{className:"font-semibold hover:text-amber-700 hover:underline text-lg text-slate-800 dark:text-gray-200 leading-tight cursor-pointer",children:"Place order"})})]})})})})}),e.jsx("div",{className:"h-screen overflow-auto",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"flex flex-col gap-6 p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("div",{className:"md:flex hidden items-center px-4 py-2 rounded bg-fuchsia-200 shadow-lg border border-gray text-sky-500 text-lg",children:[e.jsx("div",{className:"w-1/2 ml-6",children:"Products"}),e.jsx("div",{className:"w-1/2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-1/3 text-center",children:"Unit price"}),e.jsx("div",{className:"w-1/3 text-center",children:"Quantity"}),e.jsx("div",{className:"w-1/3 text-center",children:"Total"})]})})]}),s.order_items.length>0&&s.order_items.map(a=>e.jsx(p,{item:a},a.id)),e.jsxs("div",{className:"px-4 py-2 mb-4 rounded bg-fuchsia-50 shadow-lg border border-gray text-lg",children:[e.jsx("div",{className:"my-4 w-full text-center text-orange-500 text-2xl",children:"Delivery"}),e.jsxs("div",{className:"flex sm:flex-row flex-col justify-between items-center sm:px-4 px-2",children:[(s.status==="pending"||s.status==="unpaid")&&e.jsxs("form",{onSubmit:c,id:"deliveryForm",className:"flex flex-col gap-2",children:[e.jsx("select",{value:t.province,className:"select select-bordered w-full ",onChange:a=>l("province",a.target.value),children:x.map((a,i)=>e.jsx("option",{value:a,children:a},i))}),e.jsxs("label",{className:"input input-bordered flex items-center gap-2",children:["Phone number",e.jsx("input",{value:t.phone,onChange:a=>l("phone",a.target.value),type:"tel",pattern:"[0-9]{10}",className:"grow border-none focus-within:ring-0",placeholder:"0123456789",required:!0})]}),e.jsxs("label",{className:"input input-bordered flex items-center gap-2",children:["Address",e.jsx("input",{required:!0,value:t.address,onChange:a=>l("address",a.target.value),type:"text",className:"grow border-none focus-within:ring-0",placeholder:"Enter your address"})]}),e.jsxs("select",{value:t.delivery_type,onChange:a=>l("delivery_type",a.target.value),className:"select select-bordered w-full ",children:[e.jsx("option",{value:"normal",children:"Normal order"}),e.jsx("option",{value:"rush",children:"Rush order"})]}),e.jsxs("select",{value:t.payment_method,onChange:a=>l("payment_method",a.target.value),className:"select select-bordered w-full ",children:[e.jsx("option",{value:"vn pay",children:"VN pay"}),e.jsx("option",{value:"cash",children:"Cash"})]})]}),e.jsxs("div",{className:`flex w-full flex-col gap-2 text-sm sm:mt-0 mt-4 ${s.status==="pending"||s.status==="unpaid"?"sm:w-2/5":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-nowrap",children:"Merchandise Subtotal:"}),e.jsxs("p",{className:"sm:py-3 py-1 sm:w-full w-auto text-end",children:[e.jsx("span",{className:"text-xs",children:"đ"}),Intl.NumberFormat().format(s.total_price)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-nowrap",children:"Shipping Total:"}),e.jsxs("p",{className:"sm:py-3 py-1 sm:w-full w-auto text-end",children:[e.jsx("span",{className:"text-xs",children:"đ"}),Intl.NumberFormat().format(t.shipping_fee)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-nowrap",children:"Voucher Discount:"}),e.jsxs("p",{className:"sm:py-3 py-1 sm:w-full w-auto text-end",children:[e.jsx("span",{className:"text-xs",children:"đ"}),Intl.NumberFormat().format(t.free_ship_discount)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-nowrap",children:"Total Payment:"}),e.jsxs("p",{className:"sm:py-3 py-1 sm:w-full w-auto text-end text-3xl text-red-500",children:[e.jsx("span",{className:"text-xs",children:"đ"}),Intl.NumberFormat().format(t.total_price)]})]})]})]}),e.jsxs("div",{className:"text-pink-700 sm:px-6 px-2 py-4 text-justify",children:[e.jsx("span",{className:"text-bold text-lg",children:"Note: "}),e.jsx("span",{className:"text-sm",children:"Order with a total value of the items exceeding 100,000 VND will qualify for free shipping, up to a maximum of 25,000 VND (not apply to rush order) Rush order will be delivered within 2 hours and free ship is not supported. We charge an additional 10,000 VND for each item."})]})]}),e.jsx("div",{className:"flex justify-center mb-12",children:e.jsx(j,{completeSteps:s.status==="pending"||s.status==="unpaid"?4:5})})]})})})}),(s.status==="pending"||s.status==="unpaid")&&e.jsx("div",{className:"fixed right-0 left-0 bottom-0 bg-pink-100 px-4 py-4 shadow",children:e.jsx("div",{className:"max-w-3xl mx-auto flex justify-end items-center",children:e.jsx("button",{type:"submit",form:"deliveryForm",className:"btn btn-primary text-slate-200 text-lg w-32",children:"Place order"})})})]})};g.layout=s=>e.jsx(u,{user:s.props.auth.user,children:s});export{g as default};
